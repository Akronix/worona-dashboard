webpackJsonp([2],{38:function(e,n,t){var r;(function(){"use strict";function n(){}function o(e,n){for(var t=e.length;t--;)if(e[t].listener===n)return t;return-1}function i(e){return function(){return this[e].apply(this,arguments)}}var c=n.prototype,u=this,s=u.EventEmitter;c.getListeners=function(e){var n,t,r=this._getEvents();if(e instanceof RegExp){n={};for(t in r)r.hasOwnProperty(t)&&e.test(t)&&(n[t]=r[t])}else n=r[e]||(r[e]=[]);return n},c.flattenListeners=function(e){var n,t=[];for(n=0;n<e.length;n+=1)t.push(e[n].listener);return t},c.getListenersAsObject=function(e){var n,t=this.getListeners(e);return t instanceof Array&&(n={},n[e]=t),n||t},c.addListener=function(e,n){var t,r=this.getListenersAsObject(e),i="object"==typeof n;for(t in r)r.hasOwnProperty(t)&&-1===o(r[t],n)&&r[t].push(i?n:{listener:n,once:!1});return this},c.on=i("addListener"),c.addOnceListener=function(e,n){return this.addListener(e,{listener:n,once:!0})},c.once=i("addOnceListener"),c.defineEvent=function(e){return this.getListeners(e),this},c.defineEvents=function(e){for(var n=0;n<e.length;n+=1)this.defineEvent(e[n]);return this},c.removeListener=function(e,n){var t,r,i=this.getListenersAsObject(e);for(r in i)i.hasOwnProperty(r)&&(t=o(i[r],n),-1!==t&&i[r].splice(t,1));return this},c.off=i("removeListener"),c.addListeners=function(e,n){return this.manipulateListeners(!1,e,n)},c.removeListeners=function(e,n){return this.manipulateListeners(!0,e,n)},c.manipulateListeners=function(e,n,t){var r,o,i=e?this.removeListener:this.addListener,c=e?this.removeListeners:this.addListeners;if("object"!=typeof n||n instanceof RegExp)for(r=t.length;r--;)i.call(this,n,t[r]);else for(r in n)n.hasOwnProperty(r)&&(o=n[r])&&("function"==typeof o?i.call(this,r,o):c.call(this,r,o));return this},c.removeEvent=function(e){var n,t=typeof e,r=this._getEvents();if("string"===t)delete r[e];else if(e instanceof RegExp)for(n in r)r.hasOwnProperty(n)&&e.test(n)&&delete r[n];else delete this._events;return this},c.removeAllListeners=i("removeEvent"),c.emitEvent=function(e,n){var t,r,o,i,c,u=this.getListenersAsObject(e);for(i in u)if(u.hasOwnProperty(i))for(t=u[i].slice(0),o=t.length;o--;)r=t[o],r.once===!0&&this.removeListener(e,r.listener),c=r.listener.apply(this,n||[]),c===this._getOnceReturnValue()&&this.removeListener(e,r.listener);return this},c.trigger=i("emitEvent"),c.emit=function(e){var n=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,n)},c.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},c._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},c._getEvents=function(){return this._events||(this._events={})},n.noConflict=function(){return u.EventEmitter=s,n},r=function(){return n}.call(u,t,u,e),!(void 0!==r&&(e.exports=r))}).call(this)},43:function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.CONNECTION_STARTED="connection/CONNECTION_STARTED",n.CONNECTION_REQUESTED="connection/CONNECTION_REQUESTED",n.CONNECTION_SUCCEED="connection/CONNECTION_SUCCEED",n.CONNECTION_FAILED="connection/CONNECTION_FAILED",n.DISCONNECTED="connection/DISCONNECTED"},62:function(e,n,t){"use strict";function r(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n["default"]=e,n}Object.defineProperty(n,"__esModule",{value:!0}),n.disconnected=n.connectionFailed=n.connectionSucceed=n.connectionRequested=n.connectionStarted=void 0;var o=t(43),i=r(o);n.connectionStarted=function(){return{type:i.CONNECTION_STARTED}},n.connectionRequested=function(){return{type:i.CONNECTION_REQUESTED}},n.connectionSucceed=function(){return{type:i.CONNECTION_SUCCEED}},n.connectionFailed=function(e){return{type:i.CONNECTION_FAILED,error:e}},n.disconnected=function(e){return{type:i.DISCONNECTED,error:e}}},63:function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.url="ws://localhost:3000/websocket",n.timeout=1e4},64:function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.errorEventChannel=n.readyEventChannel=n.collectionEventChannel=n.unsubscribe=n.subscribe=n.logout=n.loggedOutEventChannel=n.loggedInEventChannel=n.loginWithPassword=n.call=n.disconnectedEventChannel=n.connectedEventChannel=n.connect=n.start=n.Connection=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),c=t(395),u=t(14),s=t(63),a=(0,c.createClass)(),l=n.Connection=function(){function e(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];r(this,e),this._url=n.url||s.url,this._client=null}return i(e,[{key:"start",value:function(){this._client=new a({autoConnect:!1,autoReconnect:!1,maintainCollections:!0,ddpVersion:"1",endpoint:this._url})}},{key:"connect",value:function(){this._client.ddp.connect()}},{key:"connectedEventChannel",value:function(){var e=this;return(0,u.eventChannel)(function(n){var t=e._client.ddp.on("connected",function(){n("connected")});return function(){e._client.ddp.removeListener("connected",t)}})}},{key:"disconnectedEventChannel",value:function(){var e=this;return(0,u.eventChannel)(function(n){var t=e._client.ddp.on("disconnected",function(){n("disconnected")});return function(){e._client.ddp.removeListener("disconnected",t)}})}},{key:"call",value:function(){for(var e=this,n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];return new Promise(function(n,r){var i;(i=e._client).call.apply(i,t).then(function(e){"object"===("undefined"==typeof e?"undefined":o(e))&&"Meteor.Error"===e.errorType?r(e):n(e)})["catch"](function(e){return r(e)})})}},{key:"loginWithPassword",value:function(e,n){return this._client.loginWithPassword({email:e,password:n})}},{key:"loggedInEventChannel",value:function(){var e=this;return(0,u.eventChannel)(function(n){var t=e._client.on("loggedIn",function(){n(e._client.userId)});return function(){e._client.removeListener("loggedIn",t)}})}},{key:"loggedOutEventChannel",value:function(){var e=this;return(0,u.eventChannel)(function(n){var t=e._client.on("loggedOut",function(){n("logout")});return function(){e._client.removeListener("loggedOut",t)}})}},{key:"logout",value:function(){return this._client.logout()}},{key:"subscribe",value:function(){var e;return(e=this._client).subscribe.apply(e,arguments)}},{key:"unsubscribe",value:function(e){this._client.unsubscribe(e)}},{key:"collectionEventChannel",value:function(e){var n=this;return(0,u.eventChannel)(function(t){var r=n._client.ddp.on("added",function(n){var r=n.collection,o=n.id,i=n.fields;r===e&&t({collection:r,event:"added",id:o,fields:i})}),o=n._client.ddp.on("changed",function(n){var r=n.collection,o=n.id,i=n.fields;r===e&&t({collection:r,event:"changed",id:o,fields:i})}),i=n._client.ddp.on("removed",function(n){var r=n.collection,o=n.id,i=n.fields;r===e&&t({collection:r,event:"removed",id:o,fields:i})});return function(){n._client.ddp.removeListener("added",r),n._client.ddp.removeListener("changed",o),n._client.ddp.removeListener("removed",i)}})}},{key:"readyEventChannel",value:function(e){return(0,u.eventChannel)(function(n){var t=e.on("ready",function(){n(e.name)});return function(){e.removeListener("ready",t)}})}},{key:"errorEventChannel",value:function(e){return(0,u.eventChannel)(function(n){var t=e.on("error",function(t){n(e.name,t)});return function(){e.removeListener("error",t)}})}}]),e}(),f=new l;n.start=f.start.bind(f),n.connect=f.connect.bind(f),n.connectedEventChannel=f.connectedEventChannel.bind(f),n.disconnectedEventChannel=f.disconnectedEventChannel.bind(f),n.call=f.call.bind(f),n.loginWithPassword=f.loginWithPassword.bind(f),n.loggedInEventChannel=f.loggedInEventChannel.bind(f),n.loggedOutEventChannel=f.loggedOutEventChannel.bind(f),n.logout=f.logout.bind(f),n.subscribe=f.subscribe.bind(f),n.unsubscribe=f.unsubscribe.bind(f),n.collectionEventChannel=f.collectionEventChannel.bind(f),n.readyEventChannel=f.readyEventChannel.bind(f),n.errorEventChannel=f.errorEventChannel.bind(f),n["default"]=f},65:function(e,n,t){"use strict";function r(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n["default"]=e,n}Object.defineProperty(n,"__esModule",{value:!0}),n.isConnecting=n.isConnected=void 0;var o=t(7),i=t(43),c=r(i),u=n.isConnected=function(){var e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],n=arguments[1];switch(n.type){case c.CONNECTION_SUCCEED:return!0;case c.DISCONNECTED:return!1;default:return e}},s=n.isConnecting=function(){var e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],n=arguments[1];switch(n.type){case c.CONNECTION_REQUESTED:return!0;case c.CONNECTION_SUCCEED:case c.CONNECTION_FAILED:return!1;default:return e}};n["default"]=function(){return(0,o.combineReducers)({isConnected:u,isConnecting:s})}},204:function(e,n,t){"use strict";function r(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n["default"]=e,n}function o(e){var n=e.id,t=e.token;return this.userId=n,this.loggedIn=!0,s.set(this.endpoint+"__login_token__",t).then(this.emit.bind(this,"loggedIn",n)).then(function(){return n})}function i(){return this.userId=null,this.loggedIn=!1,s.del(this.endpoint+"__login_token__").then(this.emit.bind(this,"loggedOut")).then(function(){return null})}function c(){return s.get(this.endpoint+"__login_token__").then(function(e){if(!e)throw new Error("No login token");return{resume:e}}).then(this.login.bind(this))["catch"](i.bind(this))}Object.defineProperty(n,"__esModule",{value:!0}),n.onLogin=o,n.onLogout=i,n.resumeLogin=c;var u=t(402),s=r(u)},205:function(e,n,t){function r(e,n,t){var r=e[n];E.call(e,n)&&l(r,t)&&(void 0!==t||n in e)||(e[n]=t)}function o(e){return function(n){return null==n?void 0:n[e]}}function i(e,n,t,o){t||(t={});for(var i=-1,c=n.length;++i<c;){var u=n[i],s=o?o(t[u],e[u],u,t,e):e[u];r(t,u,s)}return t}function c(e){return y(function(n,t){var r=-1,o=t.length,i=o>1?t[o-1]:void 0,c=o>2?t[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,c&&s(t[0],t[1],c)&&(i=3>o?void 0:i,o=1),n=Object(n);++r<o;){var u=t[r];u&&e(n,u,r,i)}return n})}function u(e,n){return n=null==n?b:n,!!n&&("number"==typeof e||O.test(e))&&e>-1&&e%1==0&&n>e}function s(e,n,t){if(!p(t))return!1;var r=typeof n;return("number"==r?f(t)&&u(n,t.length):"string"==r&&n in t)?l(t[n],e):!1}function a(e){var n=e&&e.constructor,t="function"==typeof n&&n.prototype||_;return e===t}function l(e,n){return e===n||e!==e&&n!==n}function f(e){return null!=e&&h(j(e))&&!d(e)}function d(e){var n=p(e)?C.call(e):"";return n==g||n==m}function h(e){return"number"==typeof e&&e>-1&&e%1==0&&b>=e}function p(e){var n=typeof e;return!!e&&("object"==n||"function"==n)}var v=t(408),y=t(409),b=9007199254740991,g="[object Function]",m="[object GeneratorFunction]",O=/^(?:0|[1-9]\d*)$/,_=Object.prototype,E=_.hasOwnProperty,C=_.toString,w=_.propertyIsEnumerable,k=!w.call({valueOf:1},"valueOf"),j=o("length"),N=c(function(e,n){if(k||a(n)||f(n))return void i(n,v(n),e);for(var t in n)E.call(n,t)&&r(e,t,n[t])});e.exports=N},233:function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.CONNECTION_LOST="Connection lost",n.CONNECTION_TIMEOUT="Connection timeout"},234:function(e,n,t){"use strict";function r(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n["default"]=e,n}Object.defineProperty(n,"__esModule",{value:!0}),n.sagas=n.libs=n.selectors=n.reducers=n.types=n.actions=void 0;var o=t(62),i=r(o),c=t(43),u=r(c),s=t(65),a=r(s),l=t(237),f=r(l),d=t(64),h=r(d),p=t(236),v=r(p);n.actions=i,n.types=u,n.reducers=a,n.selectors=f,n.libs=h,n.sagas=v},235:function(e,n,t){"use strict";function r(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n["default"]=e,n}function o(){var e,n,t,r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,i.call)(l.start);case 2:return o.next=4,(0,i.put)(d.connectionStarted());case 4:return o.next=6,(0,i.call)(l.connectedEventChannel);case 6:return e=o.sent,o.next=9,(0,i.call)(l.disconnectedEventChannel);case 9:n=o.sent;case 10:return o.next=13,(0,i.put)(d.connectionRequested());case 13:return o.next=15,(0,i.call)(l.connect);case 15:return o.next=17,(0,i.race)({connected:(0,i.take)(e),timeout:(0,i.call)(c.delay,s.timeout)});case 17:if(t=o.sent,r=t.connected,!r){o.next=28;break}return o.next=22,(0,i.put)(d.connectionSucceed());case 22:return o.next=24,(0,i.take)(n);case 24:return o.next=26,(0,i.put)(d.disconnected(u.CONNECTION_LOST));case 26:o.next=30;break;case 28:return o.next=30,(0,i.put)(d.connectionFailed(u.CONNECTION_TIMEOUT));case 30:o.next=10;break;case 32:case"end":return o.stop()}},h[0],this)}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o;var i=t(9),c=t(14),u=t(233),s=t(63),a=t(64),l=r(a),f=t(62),d=r(f),h=[o].map(regeneratorRuntime.mark)},236:function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,[(0,i.fork)(u["default"])];case 2:case"end":return e.stop()}},s[0],this)}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o;var i=t(9),c=t(235),u=r(c),s=[o].map(regeneratorRuntime.mark)},237:function(e,n,t){"use strict";function r(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n["default"]=e,n}function o(e){return e&&e.__esModule?e:{"default":e}}var i=t(55),c=o(i),u=t(65),s=r(u);(0,c["default"])(s).omit("default").keys().forEach(function(n){e.exports[n]=function(e){return e.connection[n]}})},395:function(e,n,t){"use strict";function r(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n["default"]=e,n}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function c(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],n=[d,y,O,p,g].concat(e),t=function(){var e=this,t=arguments;n.forEach(function(n){var r=n.init;return r&&r.apply(e,t)})};return t.prototype=Object.create(l["default"].prototype),t.prototype.constructor=t,s["default"].apply(void 0,[t.prototype].concat(i(n))),delete t.prototype.init,t}Object.defineProperty(n,"__esModule",{value:!0}),n.createClass=c;var u=t(205),s=o(u),a=t(38),l=o(a),f=t(396),d=r(f),h=t(397),p=r(h),v=t(398),y=r(v),b=t(399),g=r(b),m=t(400),O=r(m)},396:function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){this.ddp.connect()}function i(){this.ddp.disconnect()}function c(e){var n=this,t=e.endpoint,r=e.SocketConstructor,o=void 0===r?WebSocket:r,i=e.autoConnect,c=e.autoReconnect,u=e.reconnectInterval;this.endpoint=t;var a={endpoint:t,SocketConstructor:o,autoConnect:i,autoReconnect:c,reconnectInterval:u};this.ddp=new s["default"](a).on("connected",function(){return n.emit("connected")}).on("disconnected",function(){return n.emit("disconnected")})}Object.defineProperty(n,"__esModule",{value:!0}),n.connect=o,n.disconnect=i,n.init=c;var u=t(404),s=r(u)},397:function(e,n,t){"use strict";function r(e){return this.call("login",e).then(c.onLogin.bind(this))}function o(){return this.call("logout").then(c.onLogout.bind(this))}function i(){this.userId=null,this.loggedIn=!1,this.ddp.on("connected",c.resumeLogin.bind(this))}Object.defineProperty(n,"__esModule",{value:!0}),n.login=r,n.logout=o,n.init=i;var c=t(204)},398:function(e,n){"use strict";function t(e,n){var t=this;return new Promise(function(r,o){var i=t.ddp.method(e,n);t.methods.cache[i]={resolve:r,reject:o}})}function r(e){for(var n=arguments.length,t=Array(n>1?n-1:0),r=1;n>r;r++)t[r-1]=arguments[r];return this.apply(e,t)}function o(){var e=this;this.methods={cache:{}},this.ddp.on("result",function(n){var t=n.id,r=n.error,o=n.result,i=e.methods.cache[t];r?i.reject(r):i.resolve(o),delete e.methods.cache[t]})}Object.defineProperty(n,"__esModule",{value:!0}),n.apply=t,n.call=r,n.init=o},399:function(e,n,t){"use strict";function r(e){var n=e.username,t=e.email,r=e.password,o={password:r,user:{username:n,email:t}};return this.call("createUser",o).then(i.onLogin.bind(this))}function o(e){var n=e.username,t=e.email,r=e.password,o={password:r,user:{username:n,email:t}};return this.call("login",o).then(i.onLogin.bind(this))}Object.defineProperty(n,"__esModule",{value:!0}),n.createUser=r,n.loginWithPassword=o;var i=t(204)},400:function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function i(e){var n=e.id,t=e.name,r=e.params,i=e.stillInQueue;i||(this.subscriptions.cache.del(n),this.subscribe.apply(this,[t].concat(o(r))))}function c(e){for(var n=arguments.length,t=Array(n>1?n-1:0),r=1;n>r;r++)t[r-1]=arguments[r];var o=(0,y["default"])(e,t),i=this.subscriptions.cache.get(o);if(!i){var c=this.ddp.sub(e,t),u="connected"!==this.ddp.status;i=(0,l["default"])(new d["default"],{fingerprint:o,id:c,name:e,params:t,stillInQueue:u}),this.subscriptions.cache.add(i)}return i}function u(e){this.ddp.unsub(e)}function s(){var e=this;this.subscriptions={cache:new p["default"]},this.ddp.on("ready",function(n){var t=n.subs;t.forEach(function(n){e.subscriptions.cache.get(n).emit("ready")})}).on("nosub",function(n){var t=n.error,r=n.id;t&&e.subscriptions.cache.get(r).emit("error",t),e.subscriptions.cache.del(r)}).on("connected",function(){e.subscriptions.cache.forEach(i.bind(e))})}Object.defineProperty(n,"__esModule",{value:!0}),n.subscribe=c,n.unsubscribe=u,n.init=s;var a=t(205),l=r(a),f=t(38),d=r(f),h=t(403),p=r(h),v=t(401),y=r(v)},401:function(e,n){"use strict";function t(e,n){return JSON.stringify({name:e,params:n})}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=t},402:function(e,n){"use strict";function t(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e){return new Promise(function(n,t){"undefined"!=typeof chrome&&chrome.storage?chrome.storage.local.get(e,function(t){return n(t[e])}):"undefined"!=typeof localStorage?n(localStorage[e]):"undefined"!=typeof AsyncStorage?AsyncStorage.getItem(e,function(e,r){e?t(e):n(r)}):n(c[e])})}function o(e,n){return new Promise(function(r,o){if("undefined"!=typeof chrome&&chrome.storage){var i=t({},e,n);chrome.storage.local.set(i,r)}else"undefined"!=typeof localStorage?(localStorage[e]=n,r()):"undefined"!=typeof AsyncStorage?AsyncStorage.setItem(e,n,function(e){e?o(e):r()}):(c[e]=n,r())})}function i(e){return new Promise(function(n,t){"undefined"!=typeof chrome&&chrome.storage?chrome.storage.local.remove(e,n):"undefined"!=typeof localStorage?(delete localStorage[e],n()):"undefined"!=typeof AsyncStorage?AsyncStorage.removeItem(e,function(e){e?t(e):n()}):(delete c[e],n())})}Object.defineProperty(n,"__esModule",{value:!0}),n.get=r,n.set=o,n.del=i;var c={}},403:function(e,n){"use strict";function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),o=function(){function e(){t(this,e),this.byFingerprint={},this.byId={}}return r(e,[{key:"add",value:function(e){this.byFingerprint[e.fingerprint]=e,this.byId[e.id]=e}},{key:"get",value:function(e){return this.byId[e]||this.byFingerprint[e]||null}},{key:"del",value:function(e){var n=this.get(e)||{};delete this.byFingerprint[n.fingerprint],delete this.byId[n.id]}},{key:"forEach",value:function(e){var n=this;Object.keys(this.byId).forEach(function(t){e(n.byId[t])})}}]),e}();n["default"]=o},404:function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function i(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function c(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),s=function O(e,n,t){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:O(o,n,t)}if("value"in r)return r.value;var i=r.get;return void 0!==i?i.call(t):void 0},a=t(38),l=r(a),f=t(405),d=r(f),h=t(406),p=r(h),v=t(407),y="1",b=["ready","nosub","added","changed","removed","result","updated","error"],g=1e4,m=function(e){function n(e){o(this,n);var t=i(this,Object.getPrototypeOf(n).call(this));return t.status="disconnected",t.autoConnect=e.autoConnect!==!1,t.autoReconnect=e.autoReconnect!==!1,t.reconnectInterval=e.reconnectInterval||g,t.messageQueue=new d["default"](function(e){return"connected"===t.status?(t.socket.send(e),!0):!1}),t.socket=new p["default"](e.SocketConstructor,e.endpoint),t.socket.on("open",function(){t.socket.send({msg:"connect",version:y,support:[y]})}),t.socket.on("close",function(){t.status="disconnected",t.messageQueue.empty(),t.emit("disconnected"),t.autoReconnect&&setTimeout(t.socket.open.bind(t.socket),t.reconnectInterval)}),t.socket.on("message:in",function(e){"connected"===e.msg?(t.status="connected",t.messageQueue.process(),t.emit("connected")):"ping"===e.msg?t.socket.send({msg:"pong",id:e.id}):(0,v.contains)(b,e.msg)&&t.emit(e.msg,e)}),t.autoConnect&&t.connect(),t}return c(n,e),u(n,[{key:"emit",value:function(){var e;setTimeout((e=s(Object.getPrototypeOf(n.prototype),"emit",this)).bind.apply(e,[this].concat(Array.prototype.slice.call(arguments))),0)}}]),u(n,[{key:"connect",value:function(){this.socket.open()}},{key:"disconnect",value:function(){this.autoReconnect=!1,this.socket.close()}},{key:"method",value:function(e,n){var t=(0,v.uniqueId)();return this.messageQueue.push({msg:"method",id:t,method:e,params:n}),t}},{key:"sub",value:function(e,n){var t=(0,v.uniqueId)();return this.messageQueue.push({msg:"sub",id:t,name:e,params:n}),t}},{key:"unsub",value:function(e){return this.messageQueue.push({msg:"unsub",id:e}),e}}]),n}(l["default"]);n["default"]=m},405:function(e,n){"use strict";function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),o=function(){function e(n){t(this,e),this.consumer=n,this.queue=[]}return r(e,[{key:"push",value:function(e){this.queue.push(e),this.process()}},{key:"process",value:function(){if(0!==this.queue.length){var e=this.consumer(this.queue[0]);e&&(this.queue.shift(),this.process())}}},{key:"empty",value:function(){this.queue=[]}}]),e}();n["default"]=o},406:function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function i(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function c(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),s=t(38),a=r(s),l=function(e){function n(e,t){o(this,n);var r=i(this,Object.getPrototypeOf(n).call(this));return r.SocketConstructor=e,r.endpoint=t,r.rawSocket=null,r}return c(n,e),u(n,[{key:"send",value:function(e){var n=JSON.stringify(e);this.rawSocket.send(n),this.emit("message:out",JSON.parse(n))}},{key:"open",value:function(){var e=this;this.rawSocket||(this.rawSocket=new this.SocketConstructor(this.endpoint),this.rawSocket.onopen=function(){return e.emit("open")},this.rawSocket.onclose=function(){e.rawSocket=null,e.emit("close")},this.rawSocket.onerror=function(){delete e.rawSocket.onclose,e.rawSocket.close(),e.rawSocket=null,e.emit("close")},this.rawSocket.onmessage=function(n){var t;try{t=JSON.parse(n.data)}catch(r){return}e.emit("message:in",t)})}},{key:"close",value:function(){this.rawSocket&&this.rawSocket.close()}}]),n}(a["default"]);n["default"]=l},407:function(e,n){"use strict";function t(){return(o++).toString()}function r(e,n){return-1!==e.indexOf(n)}Object.defineProperty(n,"__esModule",{value:!0}),n.uniqueId=t,n.contains=r;var o=0},408:function(e,n){function t(e,n){for(var t=-1,r=Array(e);++t<e;)r[t]=n(t);return r}function r(e,n){return j.call(e,n)||"object"==typeof e&&n in e&&null===c(e)}function o(e){return P(Object(e))}function i(e){return function(n){return null==n?void 0:n[e]}}function c(e){return I(Object(e))}function u(e){var n=e?e.length:void 0;return p(n)&&(L(e)||b(e)||l(e))?t(n,String):null}function s(e,n){return n=null==n?m:n,!!n&&("number"==typeof e||w.test(e))&&e>-1&&e%1==0&&n>e}function a(e){var n=e&&e.constructor,t="function"==typeof n&&n.prototype||k;return e===t}function l(e){return d(e)&&j.call(e,"callee")&&(!S.call(e,"callee")||N.call(e)==O)}function f(e){return null!=e&&p(T(e))&&!h(e)}function d(e){return y(e)&&f(e)}function h(e){var n=v(e)?N.call(e):"";return n==_||n==E}function p(e){return"number"==typeof e&&e>-1&&e%1==0&&m>=e}function v(e){var n=typeof e;return!!e&&("object"==n||"function"==n)}function y(e){return!!e&&"object"==typeof e}function b(e){return"string"==typeof e||!L(e)&&y(e)&&N.call(e)==C}function g(e){var n=a(e);if(!n&&!f(e))return o(e);var t=u(e),i=!!t,c=t||[],l=c.length;for(var d in e)!r(e,d)||i&&("length"==d||s(d,l))||n&&"constructor"==d||c.push(d);return c}var m=9007199254740991,O="[object Arguments]",_="[object Function]",E="[object GeneratorFunction]",C="[object String]",w=/^(?:0|[1-9]\d*)$/,k=Object.prototype,j=k.hasOwnProperty,N=k.toString,S=k.propertyIsEnumerable,I=Object.getPrototypeOf,P=Object.keys,T=i("length"),L=Array.isArray;e.exports=g},409:function(e,n){function t(e,n,t){var r=t.length;switch(r){case 0:return e.call(n);case 1:return e.call(n,t[0]);case 2:return e.call(n,t[0],t[1]);case 3:return e.call(n,t[0],t[1],t[2])}return e.apply(n,t)}function r(e,n){if("function"!=typeof e)throw new TypeError(f);return n=k(void 0===n?e.length-1:a(n),0),function(){for(var r=arguments,o=-1,i=k(r.length-n,0),c=Array(i);++o<i;)c[o]=r[n+o];switch(n){case 0:return e.call(this,c);case 1:return e.call(this,r[0],c);case 2:return e.call(this,r[0],r[1],c)}var u=Array(n+1);for(o=-1;++o<n;)u[o]=r[o];return u[n]=c,t(e,this,u)}}function o(e){var n=i(e)?w.call(e):"";return n==v||n==y}function i(e){var n=typeof e;return!!e&&("object"==n||"function"==n)}function c(e){return!!e&&"object"==typeof e}function u(e){return"symbol"==typeof e||c(e)&&w.call(e)==b}function s(e){if(!e)return 0===e?e:0;if(e=l(e),e===d||e===-d){var n=0>e?-1:1;return n*h}return e===e?e:0}function a(e){var n=s(e),t=n%1;return n===n?t?n-t:n:0}function l(e){if("number"==typeof e)return e;if(u(e))return p;if(i(e)){var n=o(e.valueOf)?e.valueOf():e;e=i(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(g,"");var t=O.test(e);return t||_.test(e)?E(e.slice(2),t?2:8):m.test(e)?p:+e}var f="Expected a function",d=1/0,h=1.7976931348623157e308,p=NaN,v="[object Function]",y="[object GeneratorFunction]",b="[object Symbol]",g=/^\s+|\s+$/g,m=/^[-+]0x[0-9a-f]+$/i,O=/^0b[01]+$/i,_=/^0o[0-7]+$/i,E=parseInt,C=Object.prototype,w=C.toString,k=Math.max;e.exports=r}});